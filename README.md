# GNOME Clipboard Sync v3

Синхронизация буфера обмена между двумя компьютерами по локальной сети. Без танцев с бубном.

## Зачем это нужно?

Если у вас несколько Linux машин и вы устали от того, что GSConnect и подобные решения работают через раз, то вот вам рабочая альтернатива. 

Навайбкодил, зато работает прекрасно. Проверено на Fedora 42, GNOME 48, Wayland.

## Как это работает

Скопировал текст на одном компе → он мгновенно появился на другом. Всё.

Никаких аккаунтов, облаков, подписок. Только ваша локальная сеть и два компьютера, которые наконец-то научились нормально общаться.

## Установка

### Из официального каталога
https://extensions.gnome.org/extension/8673/clipboard-sync

### Вручную
```bash
git clone https://github.com/Qweasd123tg/gnome-clipboard-sync.git
cd gnome-clipboard-sync
mkdir -p ~/.local/share/gnome-shell/extensions/clipboard-sync@qweasd123tg/
cp -r * ~/.local/share/gnome-shell/extensions/clipboard-sync@qweasd123tg/
```

Потом перезапустите GNOME Shell:
- На X11: `Alt+F2`, вводите `r`, жмёте Enter
- На Wayland: выйдите и зайдите заново (да, неудобно, но что поделать)

## Настройка за 3 шага

Всего три вещи нужно настроить на каждой машине:

### 1. IP-адрес другого компа

Узнайте IP второго компьютера:
```bash
hostname -I
```
Получите что-то типа `192.168.1.100` — это и есть нужный адрес.

### 2. Откройте порт в firewall

По умолчанию используется порт 7100:

```bash
# Fedora/RHEL/CentOS
sudo firewall-cmd --add-port=7100/tcp --permanent
sudo firewall-cmd --reload

# Ubuntu/Debian
sudo ufw allow 7100/tcp

# Arch (если используете firewalld)
sudo firewall-cmd --add-port=7100/tcp --permanent
sudo firewall-cmd --reload
```

### 3. Настройте расширение

Откройте настройки расширения и заполните три поля:

**На компьютере A:**
- **Peer endpoint**: `tcp://192.168.1.100:7100` (IP компьютера B)
- **Listen port**: `7100`
- **Shared secret**: `мойсекретныйпароль` (любое слово)

**На компьютере B:**
- **Peer endpoint**: `tcp://192.168.1.50:7100` (IP компьютера A)
- **Listen port**: `7100`
- **Shared secret**: `мойсекретныйпароль` (то же самое слово!)

Готово. Копируйте что-нибудь и радуйтесь магии.

## Дополнительные фичи

### Primary Selection (средняя кнопка мыши)
Включите опцию "Sync primary selection", если хотите синхронизировать буфер для вставки средней кнопкой мыши (выделил → вставил по клику).

### Режим polling
По умолчанию расширение работает в режиме push (мгновенная отправка). Если что-то глючит, можно включить polling — расширение будет само проверять изменения каждые N секунд.

Poll interval = 0 → только push (рекомендуется)  
Poll interval = 5 → проверка каждые 5 секунд + push

## Работает с

- GNOME 44
- GNOME 45
- GNOME 46
- GNOME 47
- GNOME 48

X11 и Wayland поддерживаются.

хотя проверял только на 48 wayland,но надеюсь codex не врет)

## Частые вопросы

### Не работает, что делать?
1. Проверьте, что на обеих машинах одинаковый **Shared secret**
2. Проверьте, что firewall открыл порт: `sudo firewall-cmd --list-ports`
3. Проверьте связь: `telnet IP_ДРУГОГО_КОМПА 7100`
4. Посмотрите логи: `journalctl -f /usr/bin/gnome-shell`

### Работает только в одну сторону
Проверьте, что **Peer endpoint** настроен на **обеих** машинах и указывает на правильные IP.

### Можно ли использовать через интернет?
Технически да, но:
- Данные передаются **без шифрования**
- Используйте VPN или не передавайте чувствительную информацию
- Учтите, что вам нужны статические IP или настройка port forwarding

### Можно ли синхронизировать больше двух компьютеров?
В текущей версии расширение работает по принципу "точка-точка" (peer-to-peer). Для трёх и более компов нужно настраивать попарно, но это неудобно. Возможно, в будущих версиях сделаю broadcast-режим.

## Безопасность

⚠️ **Важно:**
- Трафик передаётся **открытым текстом** по сети
- Используйте только в **доверенных** локальных сетях
- Не передавайте пароли и секретную информацию без VPN
- Используйте сложный **Shared secret**
- Настройте firewall так, чтобы порт был доступен только нужным IP

## Технические детали

Расширение использует простой TCP-сокет для обмена JSON-сообщениями. Каждое изменение буфера обмена отправляется на другую машину с временной меткой. Если две машины одновременно меняют буфер, побеждает более новая версия.

Используется встроенный GIO для сетевого взаимодействия, без внешних зависимостей.
